import{r as d,A as b,j as e,L as c,u as v,a as y,N as m,M as I}from"./index-TjWIZcj0.js";import{u as _}from"./mutation-aaNPT0gv.js";const D=({post:l})=>{const[a,n]=d.useState(l.main_image_index),[s,i]=d.useState(!0),{post_content:g,post_title:x,post_images:r,post_slug:u,post_id:h}=l,{mutate:j}=_(),{currentUser:p}=d.useContext(b);if(!l)return e.jsx("h1",{children:"NOT FOUND"});const w=t=>{console.log({INDEX:t}),n(t)},N=()=>{i(!s)},f=t=>{window.confirm("Are you sure you want to delete this item?")?j({url:"api/post/delete",newData:{id:t}}):console.log("Deletion canceled.")};return e.jsx("div",{className:"max-w-4xl mx-auto bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx(c,{to:"/",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Home"}),e.jsx("div",{children:p&&e.jsxs(e.Fragment,{children:[e.jsx(c,{to:`/update/${u}`,className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Edit"}),e.jsx(c,{onClick:()=>f(h),className:"bg-red-500 text-white px-4 py-2 rounded ml-5",children:"Delete"})]})})]}),e.jsx("h2",{className:"text-4xl font-bold text-center text-gray-800 mt-7 mb-10",children:x}),r&&r.length>0&&e.jsxs("div",{className:"grid gap-4",children:[e.jsx("div",{children:e.jsx("img",{className:"w-full h-96 object-scale-down rounded-lg",src:r[a],alt:"Main Image"})}),e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 ${s?"grid":"hidden sm:grid"}`,children:r.map((t,o)=>o!==a&&e.jsx("div",{className:"cursor-pointer",onClick:()=>w(o),children:e.jsx("img",{className:"h-32 w-full object-cover rounded-lg",src:t,alt:`Image ${o+1}`})},o))}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"block sm:hidden text-center bg-green-950 text-white px-4 py-2 rounded mt-4",onClick:N,children:s?"Hide Images":"Show More Images"})})]}),e.jsx("div",{className:"mt-10",dangerouslySetInnerHTML:{__html:g}})]})})},k=()=>{const{slug:l}=v(),{isLoading:a,isError:n,data:s,error:i}=y(l);return n&&i.message==="No post"?e.jsx(m,{}):n?e.jsx(m,{}):a?e.jsx(I,{}):(console.log({post:s}),e.jsx("div",{className:"p-6",children:e.jsx(D,{post:s})}))};export{k as default};
